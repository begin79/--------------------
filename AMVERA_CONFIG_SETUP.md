# Настройка конфигурации в панели Amvera

## Проблема
В панели Amvera выбрано окружение "docker", но проект использует Python без Docker.

## Решение: Переключиться на Python окружение

### Шаг 1: Изменить окружение

1. В панели Amvera перейдите в раздел **"Конфигурация"** (уже открыт)
2. В выпадающем списке **"Выберите окружение"** выберите **"python"** вместо "docker"
3. В выпадающем списке **"Выберите инструмент"** выберите **"pip"** или оставьте автоматический выбор

### Шаг 2: Проверить команду запуска

В разделе **"run"** → **"command"** должно быть:
```
python new_VGLTU_bot.py
```

Если команда отличается, измените её на указанную выше.

### Шаг 3: Сохранить конфигурацию

Нажмите кнопку **"Сохранить"** или **"Применить"** внизу страницы.

### Шаг 4: Настроить переменные окружения

⚠️ **ВАЖНО**: Это обязательный шаг!

1. Перейдите в раздел **"Переменные"** (Variables) в левом меню
2. Нажмите **"Добавить переменную"** или **"Add Variable"**
3. Добавьте:
   - **Ключ (Key)**: `BOT_TOKEN`
   - **Значение (Value)**: ваш токен бота от @BotFather
4. Сохраните изменения

### Шаг 5: Настроить постоянное хранилище `/data`

Чтобы база пользователей не удалялась при пересборке:

1. После первого успешного запуска откройте вкладку **"Репозиторий → Data"**.
2. Скопируйте в неё файл `users.db` (если он уже есть локально) или дождитесь, пока бот создаст его сам.
3. Убедитесь, что в коде путь к базе указывает на `/data/users.db` — сейчас это делается автоматически, но при необходимости можно задать переменную `USERS_DB_PATH`.
4. При следующих перезапусках или пересборках файл в `/data` сохранится, и пользователи не пропадут. Подробнее о папке `Data` — в [документации Amvera](https://docs.amvera.ru/applications/storage.html#data).

### Шаг 6: Перезапустить приложение

После сохранения конфигурации:
1. Перейдите в раздел **"Управление"** (Management)
2. Нажмите **"Перезапустить"** (Restart) или дождитесь автоматического перезапуска

## Альтернатива: Использовать Docker (если нужно)

Если вы хотите использовать Docker, нужно создать Dockerfile. Но для этого проекта рекомендуется использовать Python окружение, так как оно проще и быстрее.

## Проверка

После настройки проверьте логи:
1. Перейдите в раздел **"Логи"** (Logs)
2. Убедитесь, что:
   - Нет ошибок `ModuleNotFoundError`
   - Нет ошибок `BOT_TOKEN не задан`
   - Появилось сообщение `[INFO] Создан файл /app/app/config.py из переменных окружения`
   - Бот успешно запустился

## Текущая конфигурация (из amvera.yaml)

Проект использует следующую конфигурацию:
- **Окружение**: Python
- **Инструмент сборки**: pip
- **Команда установки**: `pip install -r requirements.txt`
- **Команда запуска**: `python new_VGLTU_bot.py`
- **Память**: 512M
- **CPU**: 0.5

Эти настройки уже в файле `amvera.yaml` в репозитории, но их нужно синхронизировать с интерфейсом Amvera.

